"use strict";"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(){console.log("Service Worker registered")}),Vue.component("folder-item",{props:["folder","selectedFolder"],template:'\n  <li class="m-folders-list__item"\n      v-bind:class="{\'is-active\': isActive}">\n    <a class="m-folders-list__link"\n       v-bind:href="route"\n       v-on:click="selectFolder">\n      {{ folder.name }}\n    </a>\n  </li>',computed:{isActive:function(){return this.folder.name===this.selectedFolder},route:function(){return"#".concat(this.folder.url)}},methods:{selectFolder:function(e){if(e.currentTarget.parentNode.classList.contains("is-active"))return e.preventDefault(),this.$emit("slide-to-mobile-panel","notes-list"),!1}}}),Vue.component("tags-folder-item",{props:["tag","selectedTag"],template:'\n  <li class="m-folders-list__item"\n      v-bind:class="{\'is-active\': isActive}">\n    <a class="m-folders-list__link"\n       v-bind:href="route"\n       v-on:click="selectFolder">\n      {{ tag.handle }}\n    </a>\n  </li>',computed:{isActive:function(){return this.tag.handle===this.selectedTag},route:function(){return"#".concat(this.tag.url)}},methods:{selectFolder:function(e){if(e.currentTarget.parentNode.classList.contains("is-active"))return e.preventDefault(),this.$emit("slide-to-mobile-panel","notes-list"),!1}}}),Vue.component("notes-item",{props:["note","selectedNote"],template:'\n  <li class="m-notes-list__item">\n    <div class="m-note"\n        v-bind:slug="note.slug"\n        v-bind:url="note.url"\n        v-bind:class="{\'is-active\': isActive}"\n        v-on:click="selectNote">\n      <p class="m-note__title">{{ note.title }}</p>\n      <p class="m-note__updated">{{ note.updated_at }}</p>\n    </div>\n  </li>',computed:{isActive:function(){return this.note.slug===this.selectedNote}},methods:{selectNote:function(e){var t={note:"m-note",isActive:"is-active"},n=e.currentTarget;document.querySelectorAll(".".concat(t.note)).forEach(function(e){e.classList.remove(t.isActive)}),n.classList.add(t.isActive);var i=n.getAttribute("url"),s="#".concat(i);if(window.location.hash===s)return void this.$emit("slide-to-mobile-panel","note-detail");window.location.hash=s}}}),Vue.component("note-tag",{props:["tag"],template:'\n  <li class="m-tags-list__item"\n      v-bind:key="tag.id">\n    <a class="m-tags-list__link"\n       v-bind:href="route">{{ tag.handle }}</a>\n  </li>\n  ',computed:{route:function(){return"#".concat(this.tag.url)}}}),Vue.component("note-detail",{props:["note","selectedTag"],template:'\n  <div class="m-note-detail" v-if="note">\n      <a class="m-note-detail__notes-list-link"\n         v-if="selectedTag"\n         v-bind:href="route"\n         v-on:click="slideToNotesListInMobileView"\n         ><i class="fa fa-angle-left" aria-hidden="true"></i> #{{ selectedTag }}\n      </a>\n      <a class="m-note-detail__notes-list-link"\n         v-else\n         v-bind:href="route"\n         v-on:click="slideToNotesListInMobileView"\n         ><i class="fa fa-angle-left" aria-hidden="true"></i> {{ note.folder.name }}\n      </a>\n      <h1>{{ note.title }}</h1>\n      <ul class="m-tags-list">\n        <note-tag\n          v-for="tag in note.tags"\n          v-bind:tag="tag"\n          v-bind:key="tag.id"></note-tag>\n      </ul>\n      <hr>\n      <div v-html="note.content"></div>\n  </div>',computed:{route:function(){return"#".concat(this.note.folder.url)}},updated:function(){document.querySelectorAll(".m-note-detail pre code").forEach(function(e){hljs.highlightBlock(e)})},methods:{slideToNotesListInMobileView:function(e){return e.preventDefault(),this.$emit("slide-to-mobile-panel","notes-list"),!1}}});var notesApp=new Vue({el:"#notes-app",data:{foldersList:[],tagsList:[],notesList:[],noteDetail:!1,selectedFolder:!1,selectedTag:!1,selectedNote:!1},computed:{notEmptyFoldersList:function(){return Boolean(this.foldersList.length)},notEmptyTagsList:function(){return Boolean(this.tagsList.length)}},methods:{startSpinner:function(){},stopSpinner:function(){},refreshFolders:function(e){var t=this;this.$http.get("/folders").then(function(e){t.foldersList=e.data})},refreshTags:function(e){var t=this;this.$http.get("/tags").then(function(e){t.tagsList=e.data})},getNotesInFolder:function(e){var t=this;e=encodeURIComponent(e),this.$http.get("/folders/".concat(e)).then(function(e){t.notesList=e.data})},getNotesWithTag:function(e){var t=this;e=encodeURIComponent(e),this.$http.get("/tags/".concat(e)).then(function(e){t.notesList=e.data})},folderChangeHandler:function(e){this.selectedFolder=e,this.selectedTag=!1,this.selectedNote=!1,this.noteDetail=!1,this.getNotesInFolder(e)},tagChangeHandler:function(e){this.selectedFolder=!1,this.selectedTag=e,this.selectedNote=!1,this.noteDetail=!1,this.getNotesWithTag(e)},noteChangeHandler:function(e){var t=this;this.$http.get("/notes/".concat(e)).then(function(e){t.noteDetail=e.data})},slideToFoldersListInMobileView:function(e){return e.preventDefault(),this.slideToMobilePanel("folders-list"),!1},slideToMobilePanel:function(e){var t=document.querySelector(".l-wrapper");switch(e){case"folders-list":t.classList.add("folders-visible"),t.classList.remove("notes-list-visible"),t.classList.remove("note-detail-visible");break;case"notes-list":t.classList.remove("folders-visible"),t.classList.add("notes-list-visible"),t.classList.remove("note-detail-visible");break;case"note-detail":t.classList.remove("folders-visible"),t.classList.remove("notes-list-visible"),t.classList.add("note-detail-visible")}},init:function(){var e=this;if(this.foldersList.length||this.refreshFolders(),this.tagsList.length||this.refreshTags(),!window.location.hash)return void this._noHashInit();var t=/^#\/folders\/([^\/]+)\/?$/,n=window.location.hash.match(t);if(n){var i=n[1];return this.folderChangeHandler(i),void this.slideToMobilePanel("notes-list")}var s=/^#\/tags\/([^\/]+)\/?$/,o=window.location.hash.match(s);if(o){var l=o[1];return this.tagChangeHandler(l),void this.slideToMobilePanel("notes-list")}var a=/^#\/notes\/([^\/]+)\/?$/,r=window.location.hash.match(a);if(r){var c=r[1];this.$http.get("/notes/".concat(c)).then(function(t){e.noteDetail=t.data,e.selectedNote=e.noteDetail.slug;for(var n=e.noteDetail.folder.name,i=n===e.selectedFolder,s=!1,o=0;o<e.noteDetail.tags.length;o++){e.noteDetail.tags[o].handle===e.selectedTag&&(s=!0)}s||(e.selectedTag=!1),i||s?e.slideToMobilePanel("note-detail"):(e.selectedFolder=n,e.$http.get("/folders/".concat(n)).then(function(t){e.notesList=t.data,e.slideToMobilePanel("note-detail")}))})}},_noHashInit:function(){var e=this;this.$http.get("/folders").then(function(t){if(e.foldersList=t.data,e.foldersList.length){var n=e.foldersList[0].name;e.selectedFolder=n,e.$http.get("/folders/".concat(n)).then(function(t){if(e.notesList=t.data,e.notesList.length){var n=e.notesList[0].slug;e.selectedNote=n,e.noteChangeHandler(n)}e.slideToMobilePanel("folders-list")})}})}},beforeMount:function(){this.init()}});window.onhashchange=function(e){notesApp.init()};