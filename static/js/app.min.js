!function(){function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return r(t[s][1][e]||e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}return e}()({1:[function(e,t,n){t.exports=e("./lib/axios")},{"./lib/axios":3}],2:[function(e,t,n){(function(n){"use strict";var o=e("./../utils"),r=e("./../core/settle"),i=e("./../helpers/buildURL"),s=e("./../helpers/parseHeaders"),a=e("./../helpers/isURLSameOrigin"),c=e("../core/createError"),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||e("./../helpers/btoa");t.exports=function(t){return new Promise(function(l,f){var d=t.data,p=t.headers;o.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest,g="onreadystatechange",v=!1;if("test"===n.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||a(t.url)||(h=new window.XDomainRequest,g="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),t.auth){var m=t.auth.username||"",b=t.auth.password||"";p.Authorization="Basic "+u(m+":"+b)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h[g]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in h?s(h.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?h.response:h.responseText,o={data:n,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:e,config:t,request:h};r(l,f,o),h=null}},h.onerror=function(){f(c("Network Error",t,null,h)),h=null},h.ontimeout=function(){f(c("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},o.isStandardBrowserEnv()){var y=e("./../helpers/cookies"),w=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;w&&(p[t.xsrfHeaderName]=w)}if("setRequestHeader"in h&&o.forEach(p,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(e){h&&(h.abort(),f(e),h=null)}),void 0===d&&(d=null),h.send(d)})}}).call(this,e("_process"))},{"../core/createError":9,"./../core/settle":12,"./../helpers/btoa":16,"./../helpers/buildURL":17,"./../helpers/cookies":19,"./../helpers/isURLSameOrigin":21,"./../helpers/parseHeaders":23,"./../utils":25,_process:28}],3:[function(e,t,n){"use strict";function o(e){var t=new s(e),n=i(s.prototype.request,t);return r.extend(n,s.prototype,t),r.extend(n,t),n}var r=e("./utils"),i=e("./helpers/bind"),s=e("./core/Axios"),a=e("./defaults"),c=o(a);c.Axios=s,c.create=function(e){return o(r.merge(a,e))},c.Cancel=e("./cancel/Cancel"),c.CancelToken=e("./cancel/CancelToken"),c.isCancel=e("./cancel/isCancel"),c.all=function(e){return Promise.all(e)},c.spread=e("./helpers/spread"),t.exports=c,t.exports.default=c},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./defaults":14,"./helpers/bind":15,"./helpers/spread":24,"./utils":25}],4:[function(e,t,n){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,t.exports=o},{}],5:[function(e,t,n){"use strict";function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}var r=e("./Cancel");o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},t.exports=o},{"./Cancel":4}],6:[function(e,t,n){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],7:[function(e,t,n){"use strict";function o(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var r=e("./../defaults"),i=e("./../utils"),s=e("./InterceptorManager"),a=e("./dispatchRequest");o.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(r,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){o.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){o.prototype[e]=function(t,n,o){return this.request(i.merge(o||{},{method:e,url:t,data:n}))}}),t.exports=o},{"./../defaults":14,"./../utils":25,"./InterceptorManager":8,"./dispatchRequest":10}],8:[function(e,t,n){"use strict";function o(){this.handlers=[]}var r=e("./../utils");o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=o},{"./../utils":25}],9:[function(e,t,n){"use strict";var o=e("./enhanceError");t.exports=function(e,t,n,r,i){var s=new Error(e);return o(s,t,n,r,i)}},{"./enhanceError":11}],10:[function(e,t,n){"use strict";function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var r=e("./../utils"),i=e("./transformData"),s=e("../cancel/isCancel"),a=e("../defaults"),c=e("./../helpers/isAbsoluteURL"),u=e("./../helpers/combineURLs");t.exports=function(e){return o(e),e.baseURL&&!c(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return o(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(o(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/isCancel":6,"../defaults":14,"./../helpers/combineURLs":18,"./../helpers/isAbsoluteURL":20,"./../utils":25,"./transformData":13}],11:[function(e,t,n){"use strict";t.exports=function(e,t,n,o,r){return e.config=t,n&&(e.code=n),e.request=o,e.response=r,e}},{}],12:[function(e,t,n){"use strict";var o=e("./createError");t.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(o("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},{"./createError":9}],13:[function(e,t,n){"use strict";var o=e("./../utils");t.exports=function(e,t,n){return o.forEach(n,function(n){e=n(e,t)}),e}},{"./../utils":25}],14:[function(e,t,n){(function(n){"use strict";function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var r=e("./utils"),i=e("./helpers/normalizeHeaderName"),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=e("./adapters/xhr"):void 0!==n&&(t=e("./adapters/http")),t}(),transformRequest:[function(e,t){return i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){a.headers[e]={}}),r.forEach(["post","put","patch"],function(e){a.headers[e]=r.merge(s)}),t.exports=a}).call(this,e("_process"))},{"./adapters/http":2,"./adapters/xhr":2,"./helpers/normalizeHeaderName":22,"./utils":25,_process:28}],15:[function(e,t,n){"use strict";t.exports=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}}},{}],16:[function(e,t,n){"use strict";function o(){this.message="String contains an invalid character"}function r(e){for(var t,n,r=String(e),s="",a=0,c=i;r.charAt(0|a)||(c="=",a%1);s+=c.charAt(63&t>>8-a%1*8)){if((n=r.charCodeAt(a+=.75))>255)throw new o;t=t<<8|n}return s}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",t.exports=r},{}],17:[function(e,t,n){"use strict";function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=e("./../utils");t.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,function(e,t){null!==e&&void 0!==e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))}))}),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},{"./../utils":25}],18:[function(e,t,n){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],19:[function(e,t,n){"use strict";var o=e("./../utils");t.exports=o.isStandardBrowserEnv()?function(){return{write:function(e,t,n,r,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),o.isString(r)&&a.push("path="+r),o.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":25}],20:[function(e,t,n){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],21:[function(e,t,n){"use strict";var o=e("./../utils");t.exports=o.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return t=e(window.location.href),function(n){var r=o.isString(n)?e(n):n;return r.protocol===t.protocol&&r.host===t.host}}():function(){return function(){return!0}}()},{"./../utils":25}],22:[function(e,t,n){"use strict";var o=e("../utils");t.exports=function(e,t){o.forEach(e,function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])})}},{"../utils":25}],23:[function(e,t,n){"use strict";var o=e("./../utils"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,n,i,s={};return e?(o.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=o.trim(e.substr(0,i)).toLowerCase(),n=o.trim(e.substr(i+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},{"./../utils":25}],24:[function(e,t,n){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},{}],25:[function(e,t,n){"use strict";function o(e){return"[object Array]"===N.call(e)}function r(e){return"[object ArrayBuffer]"===N.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function s(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function a(e){return"string"==typeof e}function c(e){return"number"==typeof e}function u(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===N.call(e)}function d(e){return"[object File]"===N.call(e)}function p(e){return"[object Blob]"===N.call(e)}function h(e){return"[object Function]"===N.call(e)}function g(e){return l(e)&&h(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function m(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function b(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function y(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,o=arguments.length;n<o;n++)y(arguments[n],e);return t}function T(e,t,n){return y(t,function(t,o){e[o]=n&&"function"==typeof t?_(t,n):t}),e}var _=e("./helpers/bind"),S=e("is-buffer"),N=Object.prototype.toString;t.exports={isArray:o,isArrayBuffer:r,isBuffer:S,isFormData:i,isArrayBufferView:s,isString:a,isNumber:c,isObject:l,isUndefined:u,isDate:f,isFile:d,isBlob:p,isFunction:h,isStream:g,isURLSearchParams:v,isStandardBrowserEnv:b,forEach:y,merge:w,extend:T,trim:m}},{"./helpers/bind":15,"is-buffer":27}],26:[function(e,t,n){"use strict";!function(){function e(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function o(e,t,o){var r,i=new Promise(function(i,s){r=e[t].apply(e,o),n(r).then(i,s)});return i.request=r,i}function r(e,t,n){var r=o(e,t,n);return r.then(function(e){if(e)return new l(e,r.request)})}function i(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function s(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return o(this[t],r,arguments)})})}function a(e,t,n,o){o.forEach(function(o){o in n.prototype&&(e.prototype[o]=function(){return this[t][o].apply(this[t],arguments)})})}function c(e,t,n,o){o.forEach(function(o){o in n.prototype&&(e.prototype[o]=function(){return r(this[t],o,arguments)})})}function u(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function f(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function h(e){this._db=e}i(u,"_index",["name","keyPath","multiEntry","unique"]),s(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),i(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,o=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,o),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),f.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},f.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},i(f,"_store",["name","keyPath","indexNames","autoIncrement"]),s(f,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(f,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(f,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new f(this._tx.objectStore.apply(this._tx,arguments))},i(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new f(this._db.createObjectStore.apply(this._db,arguments))},i(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),h.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},i(h,"_db",["name","version","objectStoreNames"]),a(h,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[f,u].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),o=n[n.length-1],r=this._store||this._index,i=r[t].apply(r,n.slice(0,-1));i.onsuccess=function(){o(i.result)}})})}),[u,f].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,o=[];return new Promise(function(r){n.iterateCursor(e,function(e){return e?(o.push(e.value),void 0!==t&&o.length==t?void r(o):void e.continue()):void r(o)})})})});var g={open:function(e,t,n){var r=o(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(e){n&&n(new p(i.result,e.oldVersion,i.transaction))}),r.then(function(e){return new h(e)})},delete:function(e){return o(indexedDB,"deleteDatabase",[e])}};void 0!==t?(t.exports=g,t.exports.default=t.exports):self.idb=g}()},{}],27:[function(e,t,n){function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&o(e.slice(0,0))}t.exports=function(e){return null!=e&&(o(e)||r(e)||!!e._isBuffer)}},{}],28:[function(e,t,n){function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===o||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?g=h.concat(g):m=-1,g.length&&c())}function c(){if(!v){var e=i(a);v=!0;for(var t=g.length;t;){for(h=g,g=[];++m<t;)h&&h[m].run();m=-1,t=g.length}h=null,v=!1,s(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:o}catch(e){f=o}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,g=[],v=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new u(e,t)),1!==g.length||v||i(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],29:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r,i=o(e("axios")),s=o(e("./NotesDB")),a=o(e("./NotesPushManager"));window.isUpdateAvailable=new Promise(function(e,t){if("serviceWorker"in navigator){navigator.serviceWorker.register("/sw.js").then(function(t){console.log("Service Worker registered"),new a.default(t).initialize(),t.addEventListener("updatefound",function(){r=t.installing,r.addEventListener("statechange",function(){switch(r.state){case"installed":e(!!navigator.serviceWorker.controller)}})})}).catch(function(e){console.error("ServiceWorker registration failed",e)}),navigator.serviceWorker.addEventListener("message",function(e){if(console.log("Message from service-worker:",e.data),"action"in e.data)switch(e.data.action){case"page:reload":window.location.reload()}})}}),Vue.component("push-prompt",{props:["showPushPrompt"],template:'\n  <div id="enable-push-prompt" class="m-push-prompt"\n    v-if="showPushPrompt">\n    <div class="m-push-prompt__content">\n      <img src="/static/wicons/push-notifications1.png"/>\n      <p>\n        This app relies on push notifications to keep your notes up-to-date on this device.\n      </p>\n      <button id="enable-push-notifications"\n        v-on:click="enablePushNotifications">Enable Push Notifications</button>\n    </div>\n  </div>\n  ',methods:{enablePushNotifications:function(){console.log("Wohoo",a.default.EVENTS.ENABLE_PUSH_NOTIFICATION);var e=new Event(a.default.EVENTS.ENABLE_PUSH_NOTIFICATION);document.dispatchEvent(e),this.show=!1}}}),Vue.component("update-notification",{props:["updateAvailable","dismissed"],template:'\n  <div id="app-update-available" class="m-banner-notification"\n      v-bind:class="{\'is-visible\': isVisible}">\n    <p class="m-banner-notification__message">An update is available</p>\n    <div class="m-banner-notification__btn-wrapper">\n      <button id="update-app" class="m-btn"\n        v-on:click="update">Update</button>&nbsp;\n      <button class="m-btn"\n        v-on:click="dismiss">Later</button>\n    </div>\n  </div>\n  ',computed:{isVisible:function(){return this.updateAvailable&&!this.dismissed}},methods:{dismiss:function(){this.dismissed=!0},update:function(){r.postMessage({action:"skipWaiting"}),this.updateAvailable=!1}}}),Vue.component("folder-item",{props:["folder","selectedFolder"],template:'\n  <li class="m-folders-list__item"\n      v-bind:class="{\'is-active\': isActive}">\n    <a class="m-folders-list__link"\n       v-bind:href="route"\n       v-on:click="selectFolder">\n      {{ folder.name }}\n    </a>\n  </li>',computed:{isActive:function(){return this.folder.name===this.selectedFolder},route:function(){return"#".concat(this.folder.url)}},methods:{selectFolder:function(e){if(e.currentTarget.parentNode.classList.contains("is-active"))return e.preventDefault(),this.$emit("slide-to-mobile-panel","notes-list"),!1}}}),Vue.component("tags-folder-item",{props:["tag","selectedTag"],template:'\n  <li class="m-folders-list__item"\n      v-bind:class="{\'is-active\': isActive}">\n    <a class="m-folders-list__link"\n       v-bind:href="route"\n       v-on:click="selectFolder">\n      {{ tag.handle }}\n    </a>\n  </li>',computed:{isActive:function(){return this.tag.handle===this.selectedTag},route:function(){return"#".concat(this.tag.url)}},methods:{selectFolder:function(e){if(e.currentTarget.parentNode.classList.contains("is-active"))return e.preventDefault(),this.$emit("slide-to-mobile-panel","notes-list"),!1}}}),Vue.component("notes-item",{props:["note","selectedNote"],template:'\n  <li class="m-notes-list__item">\n    <div class="m-note"\n        v-bind:slug="note.slug"\n        v-bind:url="note.url"\n        v-bind:class="{\'is-active\': isActive}"\n        v-on:click="selectNote">\n      <p class="m-note__title">{{ note.title }}</p>\n      <p class="m-note__updated">{{ note.updated_at }}</p>\n    </div>\n  </li>',computed:{isActive:function(){return this.note.slug===this.selectedNote}},methods:{selectNote:function(e){var t={note:"m-note",isActive:"is-active"},n=e.currentTarget;document.querySelectorAll(".".concat(t.note)).forEach(function(e){e.classList.remove(t.isActive)}),n.classList.add(t.isActive);var o=n.getAttribute("url"),r="#".concat(o);if(window.location.hash===r)return void this.$emit("slide-to-mobile-panel","note-detail");window.location.hash=r}}}),Vue.component("note-tag",{props:["tag"],template:'\n  <li class="m-tags-list__item"\n      v-bind:key="tag.id">\n    <a class="m-tags-list__link"\n       v-bind:href="route">{{ tag.handle }}</a>\n  </li>\n  ',computed:{route:function(){return"#".concat(this.tag.url)}}}),Vue.component("note-detail",{props:["note","selectedTag"],template:'\n  <div class="m-note-detail" v-if="note">\n      <a class="m-note-detail__notes-list-link"\n         v-if="selectedTag"\n         v-bind:href="route"\n         v-on:click="slideToNotesListInMobileView"\n         ><i class="fa fa-angle-left" aria-hidden="true"></i> #{{ selectedTag }}\n      </a>\n      <a class="m-note-detail__notes-list-link"\n         v-else\n         v-bind:href="route"\n         v-on:click="slideToNotesListInMobileView"\n         ><i class="fa fa-angle-left" aria-hidden="true"></i> {{ note.folder.name }}\n      </a>\n      <h1>{{ note.title }}</h1>\n      <ul class="m-tags-list">\n        <note-tag\n          v-for="tag in note.tags"\n          v-bind:tag="tag"\n          v-bind:key="tag.id"></note-tag>\n      </ul>\n      <hr>\n      <div v-html="note.content"></div>\n  </div>',computed:{route:function(){return"#".concat(this.note.folder.url)}},updated:function(){document.querySelectorAll(".m-note-detail pre code").forEach(function(e){hljs.highlightBlock(e)})},methods:{slideToNotesListInMobileView:function(e){return e.preventDefault(),this.$emit("slide-to-mobile-panel","notes-list"),!1}}});var c=new Vue({el:"#notes-app",data:{updateAvailable:!1,updateNotificationDismissed:!1,showPushPrompt:"default"===Notification.permission,dbPopulated:!1,foldersList:[],tagsList:[],notesList:[],noteDetail:!1,selectedFolder:!1,selectedTag:!1,selectedNote:!1},computed:{notEmptyFoldersList:function(){return Boolean(this.foldersList.length)},notEmptyTagsList:function(){return Boolean(this.tagsList.length)}},methods:{startSpinner:function(){},stopSpinner:function(){},populateDatabase:function(e){var t=this;this.dbPopulated||(i.default.get("/folders").then(function(e){t.foldersList=e.data;var n=new s.default;t.foldersList.forEach(function(e){n.addFolder(e)}),t.foldersList.forEach(function(e){i.default.get(e.url).then(function(t){n.addNotesToFolder(t.data,e.name),t.data.forEach(function(e){i.default.get(e.url).then(function(e){n.addNoteDetail(e.data)})})})})}),i.default.get("/tags").then(function(e){t.tagsList=e.data;var n=new s.default;t.tagsList.forEach(function(e){n.addTag(e)}),t.tagsList.forEach(function(e){i.default.get(e.url).then(function(t){n.addNotesToTag(t.data,e.handle)})})}),this.dbPopulated=!0)},refreshFolders:function(){var e=this,t=!1,n=new s.default;n.getAllFolders().then(function(n){t||(e.foldersList=n)}),i.default.get("/folders").then(function(o){t=!0,e.foldersList=o.data,n.addFolders(e.foldersList)}).catch(function(e){console.log(" |- refresh folders ".concat(e))})},refreshTags:function(){var e=this,t=!1,n=new s.default;n.getAllTags().then(function(n){t||(e.tagsList=n)}),i.default.get("/tags").then(function(o){t=!0,e.tagsList=o.data,n.addTags(e.tagsList)}).catch(function(e){console.log(" |- refresh tags ".concat(e))})},getNotesInFolder:function(e){var t=this;e=encodeURIComponent(e);var n=!1,o=new s.default;o.getNotesInFolder(e).then(function(e){n||(t.notesList=e)}),i.default.get("/folders/".concat(e)).then(function(r){n=!0,t.notesList=r.data,o.addNotesToFolder(t.notesList,e)}).catch(function(t){console.log(" |- get notes in folder ".concat(e,": ").concat(t))})},getNotesWithTag:function(e){var t=this;e=encodeURIComponent(e);var n=!1,o=new s.default;o.getNotesWithTag(e).then(function(e){n||(t.notesList=e)}),i.default.get("/tags/".concat(e)).then(function(r){n=!0,t.notesList=r.data,o.addNotesToTag(t.notesList,e)}).catch(function(t){console.log(" |- get notes with tag ".concat(e,": ").concat(t))})},folderChangeHandler:function(e){this.selectedFolder=e,this.selectedTag=!1,this.selectedNote=!1,this.noteDetail=!1,this.getNotesInFolder(e)},tagChangeHandler:function(e){this.selectedFolder=!1,this.selectedTag=e,this.selectedNote=!1,this.noteDetail=!1,this.getNotesWithTag(e)},noteChangeHandler:function(e){var t=this;(new s.default).getNoteDetail(e).then(function(e){t.noteDetail=e})},slideToFoldersListInMobileView:function(e){return e.preventDefault(),this.slideToMobilePanel("folders-list"),!1},slideToMobilePanel:function(e){var t=document.querySelector(".l-wrapper");switch(e){case"folders-list":t.classList.add("folders-visible"),t.classList.remove("notes-list-visible"),t.classList.remove("note-detail-visible");break;case"notes-list":t.classList.remove("folders-visible"),t.classList.add("notes-list-visible"),t.classList.remove("note-detail-visible");break;case"note-detail":t.classList.remove("folders-visible"),t.classList.remove("notes-list-visible"),t.classList.add("note-detail-visible")}},init:function(){var e=this;if(this.dbPopulated||this.populateDatabase(),this.foldersList.length||this.refreshFolders(),this.tagsList.length||this.refreshTags(),!window.location.hash)return void this._noHashInit();var t=/^#\/folders\/([^\/]+)\/?$/,n=window.location.hash.match(t);if(n){var o=n[1];return this.folderChangeHandler(o),void this.slideToMobilePanel("notes-list")}var r=/^#\/tags\/([^\/]+)\/?$/,a=window.location.hash.match(r);if(a){var c=a[1];return this.tagChangeHandler(c),void this.slideToMobilePanel("notes-list")}var u=/^#\/notes\/([^\/]+)\/?$/,l=window.location.hash.match(u);if(l){var f=l[1],d=new s.default,p=!1;d.getNoteDetail(f).then(function(t){p||e._noteDetailSuccessHandler(t)}),i.default.get("/notes/".concat(f)).then(function(t){p=!0,d.addNoteDetail(t.data),e._noteDetailSuccessHandler(t.data)}).catch(function(e){console.log(" |- note-detail ".concat(e))})}},_noHashInit:function(){var e=this,t=new s.default;t.getAllFolders().then(function(n){if(n.length){e.foldersList=n;var o=e.foldersList[0].name;e.selectedFolder=o,t.getNotesInFolder(o).then(function(t){if(e.notesList=t,t.length){var n=e.notesList[0].slug;e.selectedNote=n,e.noteChangeHandler(n)}e.slideToMobilePanel("folders-list")})}})},_noteDetailSuccessHandler:function(e){var t=this;this.noteDetail=e,this.selectedNote=this.noteDetail.slug;for(var n=this.noteDetail.folder.name,o=n===this.selectedFolder,r=!1,a=0;a<this.noteDetail.tags.length;a++){this.noteDetail.tags[a].handle===this.selectedTag&&(r=!0)}if(r||(this.selectedTag=!1),o||r)this.slideToMobilePanel("note-detail");else{this.selectedFolder=n;var c=!1,u=new s.default;u.getNotesInFolder(n).then(function(e){c||t._notesInFolderSuccessHandler(e)}),i.default.get("/folders/".concat(n)).then(function(e){c=!0,u.addNotesToFolder(e.data,n),t._notesInFolderSuccessHandler(e.data)}).catch(function(e){console.log(" |- get notes in folder ".concat(n,": ").concat(e))})}},_notesInFolderSuccessHandler:function(e){this.notesList=e,this.slideToMobilePanel("note-detail")}},beforeMount:function(){this.init()}});window.onhashchange=function(e){c.init()},window.isUpdateAvailable.then(function(e){e&&(c.updateAvailable=!0)})},{"./NotesDB":30,"./NotesPushManager":31,axios:1}],30:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e){return e&&e.__esModule?e:{default:e}}(e("idb")),a=function(){function e(){o(this,e),this.dbPromise=s.default.open("notesDB",1,function(e){
switch(e.oldVersion){case 0:e.createObjectStore("folders",{keyPath:"id"}),e.createObjectStore("tags",{keyPath:"id"}),e.createObjectStore("notesInFolders"),e.createObjectStore("notesWithTags"),e.createObjectStore("noteDetail",{keyPath:"slug"})}})}return i(e,[{key:"addFolders",value:function(e){var t=this;e.forEach(function(e){t.addFolder(e)})}},{key:"addFolder",value:function(e){this.dbPromise.then(function(t){var n=t.transaction("folders","readwrite");return n.objectStore("folders").put(e),n.complete})}},{key:"addTags",value:function(e){var t=this;e.forEach(function(e){t.addTag(e)})}},{key:"addTag",value:function(e){this.dbPromise.then(function(t){var n=t.transaction("tags","readwrite");return n.objectStore("tags").put(e),n.complete})}},{key:"addNotesToFolder",value:function(e,t){this.dbPromise.then(function(n){var o=n.transaction("notesInFolders","readwrite");return o.objectStore("notesInFolders").put(e,t),o.complete})}},{key:"addNotesToTag",value:function(e,t){this.dbPromise.then(function(n){var o=n.transaction("notesWithTags","readwrite");return o.objectStore("notesWithTags").put(e,t),o.complete})}},{key:"addNoteDetail",value:function(e){this.dbPromise.then(function(t){var n=t.transaction("noteDetail","readwrite");return n.objectStore("noteDetail").put(e),n.complete})}},{key:"getAllFolders",value:function(){return this.dbPromise.then(function(e){return e.transaction("folders").objectStore("folders").getAll()})}},{key:"getAllTags",value:function(){return this.dbPromise.then(function(e){return e.transaction("tags").objectStore("tags").getAll()})}},{key:"getNotesInFolder",value:function(e){return this.dbPromise.then(function(t){return t.transaction("notesInFolders").objectStore("notesInFolders").get(e)})}},{key:"getNotesWithTag",value:function(e){return this.dbPromise.then(function(t){return t.transaction("notesWithTags").objectStore("notesWithTags").get(e)})}},{key:"getNoteDetail",value:function(e){return this.dbPromise.then(function(t){return t.transaction("noteDetail").objectStore("noteDetail").get(e)})}}]),e}(),c=a;n.default=c},{idb:26}],31:[function(e,t,n){"use strict";function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(){function e(t){i(this,e),this.reg=t,this.subscriptionGroup="notes-app-public",this.subscriptionSaveUrl="/webpush/save_information"}return a(e,null,[{key:"EVENTS",get:function(){return{ENABLE_PUSH_NOTIFICATION:"push-notification:enable",SUBSCRIPTION_SUCCESS_NOTIFICATION:"push-subscription:success"}}}]),a(e,[{key:"initialize",value:function(){if(!this.reg.showNotification)return void console.log("Showing notifications isn't supported");if("denied"===Notification.permission)return void console.log("You prevented us from showing notifications");if(!("PushManager"in window))return void console.log("Your browser does not support/allow push notifications");var t=this;document.addEventListener(e.EVENTS.ENABLE_PUSH_NOTIFICATION,function(){t.subscribe(t.reg)})}},{key:"repeatStr",value:function(e,t){for(var n="",o=0;o<t;o++)n+=e;return n}},{key:"urlB64ToUint8Array",value:function(e){var t=(4-e.length%4)%4,n=this.repeatStr("=",t),o=(e+n).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(o);return new Uint8Array(r.length).map(function(e,t){return r.charCodeAt(t)})}},{key:"subscribe",value:function(e){var t=this;e.pushManager.getSubscription().then(function(n){if(n)return void t.sendSubscriptionData(n);var r=document.querySelector('meta[name="vapid-key"]'),i=r.content,s=o({userVisibleOnly:!0},i&&{applicationServerKey:t.urlB64ToUint8Array(i)});e.pushManager.subscribe(s).then(function(e){t.sendSubscriptionData(e)})})}},{key:"sendSubscriptionData",value:function(t){var n=navigator.userAgent.match(/(firefox|msie|chrome|safari|trident)/gi)[0].toLowerCase(),o={status_type:"subscribe",subscription:t.toJSON(),browser:n,group:this.subscriptionGroup};fetch(this.subscriptionSaveUrl,{method:"POST",body:JSON.stringify(o),headers:{"content-type":"application/json"},credentials:"include"}).then(function(t){console.log("Push notification subscription saved successfully"),navigator.serviceWorker.controller.postMessage({action:e.EVENTS.SUBSCRIPTION_SUCCESS_NOTIFICATION}),window.location.reload()})}}]),e}(),u=c;n.default=u},{}]},{},[29,30,31]);