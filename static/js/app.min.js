"use strict";Vue.component("folder-item",{props:["folder","selectedFolder"],template:'\n  <li class="m-folders-list__item"\n      v-bind:class="{\'is-active\': isActive}">\n    <a class="m-folders-list__link"\n       v-bind:href="\'#/folders/\' + folder.name">\n      {{ folder.name }}\n    </a>\n  </li>',computed:{isActive:function(){return this.folder.name===this.selectedFolder}}}),Vue.component("tags-folder-item",{props:["tag","selectedTag"],template:'\n  <li class="m-folders-list__item"\n      v-bind:class="{\'is-active\': isActive}">\n    <a class="m-folders-list__link"\n      v-bind:href="route">\n      {{ tag.handle }}\n    </a>\n  </li>',computed:{isActive:function(){return this.tag.handle===this.selectedTag},route:function(){return"#".concat(this.tag.url)}}}),Vue.component("notes-item",{props:["note","selectedNote"],template:'\n  <li class="m-notes-list__item">\n    <div class="m-note"\n        v-bind:slug="note.slug"\n        v-bind:url="note.url"\n        v-bind:class="{\'is-active\': isActive}"\n        v-on:click="selectNote">\n      <p class="m-note__title">{{ note.title }}</p>\n      <p class="m-note__updated">{{ note.updated_at }}</p>\n    </div>\n  </li>',computed:{isActive:function(){return this.note.slug===this.selectedNote}},methods:{selectNote:function(t){var e={note:"m-note",isActive:"is-active"},s=t.currentTarget;document.querySelectorAll(".".concat(e.note)).forEach(function(t){t.classList.remove(e.isActive)}),s.classList.add(e.isActive);var n=s.getAttribute("url");window.location.hash="#".concat(n)}}}),Vue.component("note-tag",{props:["tag"],template:'\n  <li class="m-tags-list__item"\n      v-bind:key="tag.id">\n    <a class="m-tags-list__link"\n       v-bind:href="route">{{ tag.handle }}</a>\n  </li>\n  ',computed:{route:function(){return"#".concat(this.tag.url)}}}),Vue.component("note-detail",{props:["note"],template:'\n  <div class="m-note-detail" v-if="note">\n      <h1>{{ note.title }}</h1>\n      <ul class="m-tags-list">\n        <note-tag\n          v-for="tag in note.tags"\n          v-bind:tag="tag"\n          v-bind:key="tag.id"></note-tag>\n      </ul>\n      <hr>\n      <div v-html="note.content"></div>\n  </div>',updated:function(){document.querySelectorAll(".m-note-detail pre code").forEach(function(t){hljs.highlightBlock(t)})}});var notesApp=new Vue({el:"#notes-app",data:{foldersList:[],tagsList:[],notesList:[],noteDetail:!1,selectedFolder:!1,selectedTag:!1,selectedNote:!1},computed:{notEmptyFoldersList:function(){return Boolean(this.foldersList.length)},notEmptyTagsList:function(){return Boolean(this.tagsList.length)}},methods:{refreshFolders:function(t){var e=this;this.$http.get("/folders").then(function(t){e.foldersList=t.data})},refreshTags:function(t){var e=this;this.$http.get("/tags").then(function(t){e.tagsList=t.data})},getNotesInFolder:function(t){var e=this;t=encodeURIComponent(t),this.$http.get("/folders/".concat(t)).then(function(t){e.notesList=t.data})},getNotesWithTag:function(t){var e=this;t=encodeURIComponent(t),this.$http.get("/tags/".concat(t)).then(function(t){e.notesList=t.data})},folderChangeHandler:function(t){this.selectedFolder=t,this.selectedTag=!1,this.selectedNote=!1,this.noteDetail=!1,this.getNotesInFolder(t)},tagChangeHandler:function(t){this.selectedFolder=!1,this.selectedTag=t,this.selectedNote=!1,this.noteDetail=!1,this.getNotesWithTag(t)},noteChangeHandler:function(t){var e=this;this.$http.get("/notes/".concat(t)).then(function(t){e.noteDetail=t.data})},slideToMobileFocusArea:function(t){var e=document.querySelector(".l-wrapper");switch(t){case"folders-list":e.classList.add("folders-visible"),e.classList.remove("notes-list-visible"),e.classList.remove("note-detail-visible");break;case"notes-list":e.classList.remove("folders-visible"),e.classList.add("notes-list-visible"),e.classList.remove("note-detail-visible");break;case"note-detail":e.classList.remove("folders-visible"),e.classList.remove("notes-list-visible"),e.classList.add("note-detail-visible")}},init:function(){var t=this;if(this.foldersList.length||this.refreshFolders(),this.tagsList.length||this.refreshTags(),!window.location.hash)return void this._noHashInit();var e=/^#\/folders\/([^\/]+)\/?$/,s=window.location.hash.match(e);if(s){var n=s[1];return this.folderChangeHandler(n),void this.slideToMobileFocusArea("notes-list")}var i=/^#\/tags\/([^\/]+)\/?$/,o=window.location.hash.match(i);if(o){var l=o[1];return this.tagChangeHandler(l),void this.slideToMobileFocusArea("notes-list")}var a=/^#\/notes\/([^\/]+)\/?$/,c=window.location.hash.match(a);if(c){var d=c[1];this.$http.get("/notes/".concat(d)).then(function(e){t.noteDetail=e.data,t.selectedNote=t.noteDetail.slug;for(var s=t.noteDetail.folder.name,n=s===t.selectedFolder,i=!1,o=0;o<t.noteDetail.tags.length;o++){t.noteDetail.tags[o].handle===t.selectedTag&&(i=!0)}i||(t.selectedTag=!1),n||i||(t.selectedFolder=s,t.$http.get("/folders/".concat(s)).then(function(e){t.notesList=e.data,t.slideToMobileFocusArea("note-detail")}))})}},_noHashInit:function(){var t=this;this.$http.get("/folders").then(function(e){if(t.foldersList=e.data,t.foldersList.length){var s=t.foldersList[0].name;t.selectedFolder=s,t.$http.get("/folders/".concat(s)).then(function(e){if(t.notesList=e.data,t.notesList.length){var s=t.notesList[0].slug;t.selectedNote=s,t.noteChangeHandler(s)}t.slideToMobileFocusArea("folders-list")})}})}},beforeMount:function(){this.init()}});window.onhashchange=function(t){notesApp.init()};